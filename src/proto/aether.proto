syntax = "proto3";

package aether;

service AetherCore {
    rpc RegisterModule (ModuleRegistration) returns (RegistrationResponse);
    rpc Heartbeat (ModuleHeartbeat) returns (HeartbeatResponse);
    rpc ExecuteTask (TaskRequest) returns (TaskResponse);
}

message ModuleRegistration {
    string module_id = 1;
    string module_name = 2;
    string module_version = 3;
    repeated string capabilities = 4;
}

message RegistrationResponse {
    bool success = 1;
    string message = 2;
}

message ModuleHeartbeat {
    string module_id = 1;
    float cpu_usage = 2;
    float memory_usage = 3;
}

message HeartbeatResponse {
    bool acknowledged = 1;
}

message TaskRequest {
    string task_id = 1;
    string module_id = 2;
    string command = 3;
    map<string, string> params = 4;
}

message TaskResponse {
    string task_id = 1;
    bool success = 2;
    string output = 3;
    string error = 4;
}
